---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const products = [
  {
    name: 'Kayu Jati',
    slug: 'kayu-jati',
    description: 'Raja kayu Indonesia dengan durability exceptional dan natural oil content tinggi. Ideal untuk furniture premium dan flooring mewah.',
    image: '/images/products/kayu-jati.jpg',
    features: ['Tahan rayap natural', 'Oil content tinggi', 'Grain indah', 'Durability tinggi'],
    applications: ['Flooring Premium', 'Furniture Mewah', 'Pintu Solid', 'Deck Outdoor'],
    tag: 'Premium'
  },
  {
    name: 'Kayu Ulin',
    slug: 'kayu-ulin',
    description: 'Ironwood legendaris dengan ketahanan luar biasa, anti rayap dan air natural. Pilihan terbaik untuk konstruksi marine.',
    image: '/images/products/kayu-ulin.jpg',
    features: ['Anti rayap & air', 'Density sangat tinggi', 'Tahan cuaca ekstrem', 'Tidak perlu treatment'],
    applications: ['Marine Construction', 'Heavy Duty Deck', 'Bridge Components', 'Outdoor Structure'],
    tag: 'Ironwood'
  },
  {
    name: 'Kayu Merbau',
    slug: 'kayu-merbau',
    description: 'Exotic hardwood dengan natural oil content dan grain patterns yang indah. Populer untuk aplikasi komersial dan residential.',
    image: '/images/products/kayu-merbau.jpg',
    features: ['Natural oil content', 'Grain patterns indah', 'Hardwood exotic', 'Mudah di-finishing'],
    applications: ['Commercial Flooring', 'Wall Paneling', 'Stair Components', 'Custom Furniture'],
    tag: 'Exotic'
  },
  {
    name: 'Kayu Meranti',
    slug: 'kayu-meranti',
    description: 'Versatile wood dengan grain patterns indah, cocok untuk berbagai aplikasi dengan budget optimal.',
    image: '/images/products/kayu-meranti.jpg',
    features: ['Versatile aplikasi', 'Budget friendly', 'Mudah dikerjakan', 'Finishing bagus'],
    applications: ['General Flooring', 'Wall Cladding', 'Door Frames', 'General Construction'],
    tag: 'Versatile'
  },
  {
    name: 'Kamper',
    slug: 'kamper',
    description: 'Aromatic wood dengan natural pest resistance dan aroma khas yang menenangkan.',
    image: '/images/products/kamper.jpg',
    features: ['Aromatic natural', 'Anti hama alami', 'Mudah dikerjakan', 'Aroma menenangkan'],
    applications: ['Closet Lining', 'Storage Furniture', 'Indoor Paneling', 'Craft Wood'],
    tag: 'Aromatic'
  },
  {
    name: 'Bengkirai',
    slug: 'bengkirai',
    description: 'Dense hardwood ideal untuk heavy-duty applications dengan strength dan durability tinggi.',
    image: '/images/products/bengkirai.jpg',
    features: ['Dense hardwood', 'Heavy duty capable', 'High strength', 'Weather resistant'],
    applications: ['Structural Beams', 'Heavy Deck', 'Construction Lumber', 'Industrial Use'],
    tag: 'Heavy Duty'
  },
  {
    name: 'Sonokling',
    slug: 'sonokling',
    description: 'Premium rosewood dengan luxury appearance dan karakteristik unik untuk furniture eksklusif.',
    image: '/images/products/sonokling.jpg',
    features: ['Luxury appearance', 'Rosewood family', 'Fine grain', 'Premium grade'],
    applications: ['Luxury Furniture', 'Musical Instruments', 'Decorative Items', 'Art Projects'],
    tag: 'Luxury'
  },
  {
    name: 'Mahoni',
    slug: 'mahoni',
    description: 'Classic choice dengan rich reddish-brown color, mudah dikerjakan dan finishing sempurna.',
    image: '/images/products/mahoni.jpg',
    features: ['Rich color', 'Mudah dikerjakan', 'Finishing sempurna', 'Classic choice'],
    applications: ['Classic Furniture', 'Cabinetry', 'Interior Trim', 'Wooden Crafts'],
    tag: 'Classic'
  }
];

const applications = [
  'Semua Aplikasi',
  'Flooring',
  'Furniture',
  'Marine Construction',
  'Wall Paneling',
  'Outdoor Structure',
  'Commercial Use'
];

const tags = [
  'Semua Kategori',
  'Premium',
  'Ironwood',
  'Exotic',
  'Versatile',
  'Heavy Duty',
  'Luxury',
  'Classic'
];
---

<Layout 
  title="Produk Kayu Premium - Serasi Parket" 
  description="Koleksi lengkap kayu premium Indonesia: Jati, Ulin, Merbau, Meranti, Kamper, Bengkirai, Sonokling, dan Mahoni untuk berbagai aplikasi."
  keywords="kayu jati, kayu ulin, kayu merbau, kayu meranti, kamper, bengkirai, sonokling, mahoni, kayu premium, flooring kayu"
>
  <Header />
  
  <!-- Breadcrumb -->
  <nav class="bg-gray-50 py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <ol class="flex items-center space-x-2 text-sm">
        <li><a href="/" class="text-gray-500 hover:text-primary-600">Beranda</a></li>
        <li class="text-gray-400">/</li>
        <li class="text-gray-900 font-medium">Produk</li>
      </ol>
    </div>
  </nav>

  <!-- Page Header -->
  <section class="py-16 bg-gradient-to-r from-primary-600 to-primary-800 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="font-display text-4xl md:text-5xl font-bold mb-4">
        Kayu Premium Indonesia
      </h1>
      <p class="text-xl max-w-3xl mx-auto">
        Temukan koleksi lengkap kayu berkualitas tinggi dari hutan Indonesia. Setiap jenis kayu dipilih khusus untuk memberikan kualitas dan performa terbaik.
      </p>
    </div>
  </section>

  <!-- Filter Section -->
  <section class="py-8 bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col lg:flex-row gap-6 items-start lg:items-center">
        <!-- Search -->
        <div class="flex-1 max-w-md">
          <div class="relative">
            <input 
              type="text" 
              id="search-products" 
              placeholder="Cari produk kayu..." 
              class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
            />
            <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>

        <!-- Category Filter -->
        <div class="flex-shrink-0">
          <select 
            id="category-filter" 
            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          >
            {tags.map(tag => (
              <option value={tag}>{tag}</option>
            ))}
          </select>
        </div>

        <!-- Application Filter -->
        <div class="flex-shrink-0">
          <select 
            id="application-filter" 
            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          >
            {applications.map(app => (
              <option value={app}>{app}</option>
            ))}
          </select>
        </div>

        <!-- Results Count -->
        <div class="text-sm text-gray-600">
          <span id="results-count">{products.length}</span> produk ditemukan
        </div>
      </div>
    </div>
  </section>

  <!-- Products Grid -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div id="products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
        {products.map(product => (
          <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden group hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2" 
               data-category={product.tag} 
               data-applications={product.applications.join(',').toLowerCase()}
               data-name={product.name.toLowerCase()}>
            <div class="relative overflow-hidden">
              <img 
                src={product.image} 
                alt={product.name} 
                class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300"
                loading="lazy"
              />
              <div class="absolute top-4 left-4">
                <span class={`px-3 py-1 rounded-full text-xs font-semibold text-white ${
                  product.tag === 'Premium' ? 'bg-primary-600' :
                  product.tag === 'Ironwood' ? 'bg-yellow-600' :
                  product.tag === 'Exotic' ? 'bg-red-600' :
                  product.tag === 'Versatile' ? 'bg-green-600' :
                  product.tag === 'Heavy Duty' ? 'bg-blue-600' :
                  product.tag === 'Luxury' ? 'bg-purple-600' :
                  product.tag === 'Classic' ? 'bg-indigo-600' :
                  'bg-gray-600'
                }`}>
                  {product.tag}
                </span>
              </div>
              <div class="absolute top-4 right-4">
                <button 
                  class="w-8 h-8 bg-white bg-opacity-80 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all duration-300"
                  onclick={`gtag('event', 'click', { 'event_category': 'Product', 'event_label': 'Favorite ${product.name}' });`}
                >
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                  </svg>
                </button>
              </div>
            </div>
            
            <div class="p-6">
              <h3 class="font-display text-xl font-semibold text-gray-900 mb-2">{product.name}</h3>
              <p class="text-gray-600 text-sm mb-4 leading-relaxed">{product.description}</p>
              
              <!-- Features -->
              <div class="mb-4">
                <h4 class="text-sm font-semibold text-gray-700 mb-2">Fitur Utama:</h4>
                <div class="flex flex-wrap gap-1">
                  {product.features.slice(0, 2).map(feature => (
                    <span class="text-xs bg-primary-50 text-primary-700 px-2 py-1 rounded">{feature}</span>
                  ))}
                  {product.features.length > 2 && (
                    <span class="text-xs text-gray-500">+{product.features.length - 2} lainnya</span>
                  )}
                </div>
              </div>

              <!-- Applications -->
              <div class="mb-6">
                <h4 class="text-sm font-semibold text-gray-700 mb-2">Aplikasi:</h4>
                <div class="flex flex-wrap gap-1">
                  {product.applications.slice(0, 2).map(app => (
                    <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">{app}</span>
                  ))}
                  {product.applications.length > 2 && (
                    <span class="text-xs text-gray-500">+{product.applications.length - 2} lainnya</span>
                  )}
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="flex gap-2">
                <a 
                  href={`/products/${product.slug}`} 
                  class="flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg text-sm font-medium text-center hover:bg-primary-700 transition-colors duration-300"
                  onclick={`gtag('event', 'click', { 'event_category': 'Product', 'event_label': 'View Details ${product.name}' });`}
                >
                  Detail Produk
                </a>
                <button 
                  class="px-4 py-2 border border-primary-600 text-primary-600 rounded-lg text-sm font-medium hover:bg-primary-50 transition-colors duration-300"
                  onclick={`openInquiry('${product.name}'); gtag('event', 'click', { 'event_category': 'Product', 'event_label': 'Inquiry ${product.name}' });`}
                >
                  Inquiry
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- No Results Message -->
      <div id="no-results" class="hidden text-center py-16">
        <svg class="mx-auto h-24 w-24 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <h3 class="text-lg font-semibold text-gray-900 mb-2">Tidak ada produk ditemukan</h3>
        <p class="text-gray-600 mb-4">Coba ubah filter pencarian atau kata kunci Anda.</p>
        <button 
          onclick="resetFilters()" 
          class="bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors duration-300"
        >
          Reset Filter
        </button>
      </div>
    </div>
  </section>

  <!-- Inquiry Modal -->
  <div id="inquiry-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-lg max-w-md w-full p-6 relative">
      <button id="close-inquiry" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      
      <h3 class="text-2xl font-display font-semibold text-gray-900 mb-4">
        Inquiry Produk
      </h3>
      
      <form id="inquiry-form" class="space-y-4">
        <input type="hidden" id="inquiry-product" name="product" />
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap *</label>
          <input 
            type="text" 
            name="name" 
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
          <input 
            type="email" 
            name="email" 
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Nomor Telepon</label>
          <input 
            type="tel" 
            name="phone" 
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Kebutuhan & Spesifikasi</label>
          <textarea 
            name="requirements" 
            rows="3"
            placeholder="Deskripsikan kebutuhan Anda: aplikasi, dimensi, quantity, timeline, dll."
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          ></textarea>
        </div>
        
        <button 
          type="submit"
          class="w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors duration-300"
        >
          Kirim Inquiry
        </button>
      </form>
    </div>
  </div>

  <!-- CTA Section -->
  <section class="py-16 bg-gradient-to-r from-primary-600 to-primary-800 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="font-display text-3xl md:text-4xl font-bold mb-4">
        Butuh Konsultasi Pemilihan Kayu?
      </h2>
      <p class="text-xl mb-8 max-w-3xl mx-auto">
        Tim ahli kami siap membantu Anda memilih jenis kayu yang tepat sesuai aplikasi dan budget. Konsultasi gratis!
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/contact" 
          class="bg-white text-primary-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors duration-300"
          onclick="gtag('event', 'click', { 'event_category': 'CTA', 'event_label': 'Products Page Consultation' });"
        >
          Konsultasi Gratis
        </a>
        <a 
          href="https://wa.me/6281234567890?text=Halo%20Serasi%20Parket,%20saya%20butuh%20konsultasi%20pemilihan%20kayu" 
          target="_blank"
          rel="noopener noreferrer"
          class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary-600 transition-colors duration-300"
          onclick="gtag('event', 'click', { 'event_category': 'CTA', 'event_label': 'Products Page WhatsApp' });"
        >
          Chat WhatsApp
        </a>
      </div>
    </div>
  </section>

  <Footer />

  <script>
    // Filter functionality
    const searchInput = document.getElementById('search-products');
    const categoryFilter = document.getElementById('category-filter');
    const applicationFilter = document.getElementById('application-filter');
    const productsGrid = document.getElementById('products-grid');
    const resultsCount = document.getElementById('results-count');
    const noResults = document.getElementById('no-results');

    function filterProducts() {
      const searchTerm = searchInput.value.toLowerCase();
      const selectedCategory = categoryFilter.value;
      const selectedApplication = applicationFilter.value.toLowerCase();
      
      const productCards = document.querySelectorAll('.product-card');
      let visibleCount = 0;

      productCards.forEach(card => {
        const productName = card.dataset.name;
        const productCategory = card.dataset.category;
        const productApplications = card.dataset.applications;

        const matchesSearch = searchTerm === '' || productName.includes(searchTerm);
        const matchesCategory = selectedCategory === 'Semua Kategori' || productCategory === selectedCategory;
        const matchesApplication = selectedApplication === 'semua aplikasi' || productApplications.includes(selectedApplication);

        if (matchesSearch && matchesCategory && matchesApplication) {
          card.style.display = 'block';
          visibleCount++;
        } else {
          card.style.display = 'none';
        }
      });

      resultsCount.textContent = visibleCount;
      
      if (visibleCount === 0) {
        noResults.classList.remove('hidden');
        productsGrid.style.display = 'none';
      } else {
        noResults.classList.add('hidden');
        productsGrid.style.display = 'grid';
      }

      // Track filter usage
      gtag('event', 'search', {
        'search_term': searchTerm,
        'category': selectedCategory,
        'application': selectedApplication,
        'results_count': visibleCount
      });
    }

    function resetFilters() {
      searchInput.value = '';
      categoryFilter.value = 'Semua Kategori';
      applicationFilter.value = 'Semua Aplikasi';
      filterProducts();
    }

    // Event listeners
    searchInput.addEventListener('input', filterProducts);
    categoryFilter.addEventListener('change', filterProducts);
    applicationFilter.addEventListener('change', filterProducts);

    // Inquiry modal functionality
    const inquiryModal = document.getElementById('inquiry-modal');
    const closeInquiry = document.getElementById('close-inquiry');
    const inquiryForm = document.getElementById('inquiry-form');
    const inquiryProduct = document.getElementById('inquiry-product');

    function openInquiry(productName) {
      inquiryProduct.value = productName;
      inquiryModal.classList.remove('hidden');
      inquiryModal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }

    function closeInquiryModal() {
      inquiryModal.classList.add('hidden');
      inquiryModal.classList.remove('flex');
      document.body.style.overflow = 'auto';
    }

    closeInquiry.addEventListener('click', closeInquiryModal);
    
    inquiryModal.addEventListener('click', (e) => {
      if (e.target === inquiryModal) {
        closeInquiryModal();
      }
    });

    inquiryForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const formData = new FormData(inquiryForm);
      const product = formData.get('product');
      const name = formData.get('name');
      const email = formData.get('email');
      const phone = formData.get('phone');
      const requirements = formData.get('requirements');

      // Track inquiry submission
      gtag('event', 'generate_lead', {
        'currency': 'IDR',
        'value': 0,
        'product': product,
        'method': 'product_inquiry'
      });

      alert(`Terima kasih ${name}! Inquiry Anda untuk ${product} telah diterima. Tim kami akan segera menghubungi Anda.`);
      
      inquiryForm.reset();
      closeInquiryModal();
    });

    // Make openInquiry function globally available
    window.openInquiry = openInquiry;
    window.resetFilters = resetFilters;
  </script>
</Layout>
